# Requirement

애플리케이션 배포, 관리 등을 성공적으로 수행하기 위한 자원 요구사항이나 런타임 의존성 등에 대해서 식별 및 정리 해야한다. 프로그래밍 언어, 프레임워크마다 요구사항이 다를 수 있으며 애플리케이션의 수행하는 역할을 고려 해야한다.

어떤 서비스는 고정 CPU와 고정 메모리를 가지는 서비스도 있고 데이터를 저장하기 위한 Stroage가 필요한 경우도 있을 수 있고 포트 번호 변경이 어려운 서비스가 있을 수도 있다.

> [!NOTE]
> 요구사항 템플릿을 통해서 어느정도 해결할 수 있지 않을까?  
> 언어, 프레임워크, 포트번호, 스토리지 사용여부, 서비스 특징, CPU bound? I/O bound?


- **Resoure**
  - **CPU, Memory**
    - 고정 메모리: 고성능 처리가 필요한 서비스 경우 일정 수준 CPU, RAM을 보장 받아야 한다. (LLM, AI 등)
    - 동적 메모리: 트래픽에 따라 필요 리소스가 다른 경우 수평적 확장을 위한 동적 리소스 할당이 가능하도록 되어야 한다. (커머스 이벤트, 스트리밍 축구 국대 경기 등)
  - **Storage**
    - 클러스터 내 Redis를 aof 활성화하여 사용한다면 적절한 스토리지 설정이 필요
  - **Network, Permission**
    - 레거시 프로젝트내 socket 통신 혹은 쉘 통신이 있고 특정 포트를 사용한다면 네트워크 설정 변경이 어려울 수 있기에 미리 제약사항들을 파악하고 있어야 한다.
- **Framework, Language**
  - JVM 은 실행 옵션으로 힙 메모리 설정을 제공. (OOM 안전 보장 ❌)
  - PHP, GO 는 메모리 제한을 설정 가능. (OOM 에서 안전 보장 ❌)
  - Python은 메모리 제한 없지 않나?
- **Service**
  - 서비스 주요 기능들이 CPU bounded? I/O bounded? 에 따라 자원 설정을 다르게 가져가야 한다.
  - 예를 들어 Celery 배치 서비스 설정시
    - **CPU bounded**
      - 효율적인 계산을 위해 계산 로직들은 multi-processing 을 이용하여 구현 되어 있다면 CPU를 많이 주어야 한다.
      - 계산을 많이 하지만 로직들은 multi-processing 으로 구현되어 있지 않다면 CPU를 많이 줄 필요가 없다.
      - 또한 언어와 마찬가지로 Celery 적절한 옵션이 필요
    - **I/O bounded**
      - 파일 생성, 네트워크 통신 등이 많고 coroutine, multi-threading 동시 실행이 많은 경우 CPU 보다는 메모리 설정이 중요하다.
      - Celery를 사용한다면 multi-threading 구현 하지 않아도 concurrency 옵션으로 gevent, eventlet을 지원하니 구현단과 상관없이 설정이 가능하다.